'use client';
import Link from "next/link";
import { usePathname } from "next/navigation";
import React, { useEffect } from "react";
import { useMapStore } from "../store/useMapStore";

export default function Menu() {
    const pathname = usePathname(); // Obter a rota atual

    // Verifica se a rota atual é '/info'
    const isInfoActive = pathname === "/";
    const isMapActive = pathname === "/map";
    const isUsinaActive = pathname === "/usina";


    const { currentId, isActiveId, setCurrentId, setIsActiveId } = useMapStore();



    return (
        <nav className="absolute bottom-0 bg-[#349C8F] p-5 py-5 rounded-t-xl flex gap-5 z-[999]">
            {/* Ícone com cor alterada quando a rota for '/info' */}
            <Link href="/" onClick={() => setCurrentId('0', false)}>
                <svg xmlns="http://www.w3.org/2000/svg" width="63" height="54" viewBox="0 0 24 24">
                    <path
                        d="M6.271 2.112c-.81.106-1.238.301-1.544.6c-.305.3-.504.72-.613 1.513C4.002 5.042 4 6.124 4 7.675v8.57a4.2 4.2 0 0 1 1.299-.593c.528-.139 1.144-.139 2.047-.138H20V7.676c0-1.552-.002-2.634-.114-3.451c-.109-.793-.308-1.213-.613-1.513c-.306-.299-.734-.494-1.544-.6c-.834-.11-1.938-.112-3.522-.112H9.793c-1.584 0-2.688.002-3.522.112m.488 4.483c0-.448.37-.811.827-.811h8.828a.82.82 0 0 1 .827.81a.82.82 0 0 1-.827.811H7.586a.82.82 0 0 1-.827-.81m.827 2.973a.82.82 0 0 0-.827.81c0 .448.37.811.827.811h5.517a.82.82 0 0 0 .828-.81a.82.82 0 0 0-.828-.811z"
                        fill={isInfoActive ? "#F9D8A7" : "#fff"}
                        fillRule="evenodd"
                        clipRule="evenodd" />
                    <path
                        d="M7.473 17.135H20c-.003 1.13-.021 1.974-.113 2.64c-.109.793-.308 1.213-.613 1.513c-.306.299-.734.494-1.544.6c-.834.11-1.938.112-3.522.112H9.793c-1.584 0-2.688-.002-3.522-.111c-.81-.107-1.238-.302-1.544-.601c-.305-.3-.504-.72-.613-1.513c-.041-.3-.068-.637-.084-1.02a2.46 2.46 0 0 1 1.697-1.537c.29-.076.667-.083 1.746-.083"
                        fill={isInfoActive ? "#F9D8A7" : "#fff"}
                    />
                </svg>
            </Link>

            <Link href="/map" className="relative" onClick={() => setCurrentId('0', false)}>
                <div className={`${currentId == "map" ? "" : "hidden"} absolute top-[-74px] left-1/2 transform -translate-x-1/2 rotate-180`}>
                    <svg xmlns="http://www.w3.org/2000/svg" width="34" height="54" viewBox="0 0 24 24">
                        <path
                            className="animate-bounce"
                            fill="#349C8F" d="M19.221 10.803L12 10V4a2 2 0 0 0-4 0v12l-3.031-1.212a2 2 0 0 0-2.64 1.225l-.113.34a1 1 0 0 0 .309 1.084l5.197 4.332c.179.149.406.231.64.231H19a2 2 0 0 0 2-2v-7.21a2 2 0 0 0-1.779-1.987" />
                    </svg>
                </div>
                <svg width="63" height="54" viewBox="0 0 63 54" xmlns="http://www.w3.org/2000/svg">
                    <path d="M44.6 12.846C44.6 18.6909 36.7679 29.1068 33.3286 33.3995C32.5036 34.4272 30.9715 34.4272 30.1572 33.3995C26.7179 29.1068 18.8857 18.6909 18.8857 12.846C18.8857 5.74857 24.6393 0 31.7429 0C38.8465 0 44.6 5.74857 44.6 12.846ZM45.4572 21.4528C45.8322 20.7141 46.175 19.9755 46.4857 19.2475C46.5393 19.1191 46.5929 18.9799 46.6465 18.8515L59.075 13.8844C60.7679 13.2099 62.6 14.4517 62.6 16.2716V45.2606C62.6 46.3097 61.9572 47.2518 60.9822 47.6479L45.4572 53.846V21.4528ZM15.6286 14.805C15.8857 16.3144 16.4 17.8345 17 19.2475C17.3107 19.9755 17.6536 20.7141 18.0286 21.4528V48.3651L4.41074 53.8139C2.71789 54.4883 0.885742 53.2466 0.885742 51.4267V22.4376C0.885742 21.3885 1.5286 20.4465 2.5036 20.0504L15.6393 14.805H15.6286ZM36.0072 35.5405C37.4965 33.6779 39.8322 30.6483 42.0286 27.2977V53.9852L21.4572 48.1082V27.2977C23.6536 30.6483 25.9893 33.6779 27.4786 35.5405C29.675 38.281 33.8107 38.281 36.0072 35.5405ZM31.7429 16.2716C32.8795 16.2716 33.9696 15.8204 34.7733 15.0174C35.5771 14.2144 36.0286 13.1252 36.0286 11.9896C36.0286 10.8539 35.5771 9.76478 34.7733 8.96175C33.9696 8.15872 32.8795 7.70758 31.7429 7.70758C30.6062 7.70758 29.5162 8.15872 28.7124 8.96175C27.9087 9.76478 27.4572 10.8539 27.4572 11.9896C27.4572 13.1252 27.9087 14.2144 28.7124 15.0174C29.5162 15.8204 30.6062 16.2716 31.7429 16.2716Z"
                        fill={isMapActive ? "#F9D8A7" : "#fff"}
                    />
                </svg>

            </Link>

            <Link href="/usina" className="relative" onClick={() => setCurrentId('0', false)}>

                <div className={`${currentId == "usina" ? "" : "hidden"} absolute top-[-74px] left-1/2 transform -translate-x-1/2 rotate-180`}>
                    <svg xmlns="http://www.w3.org/2000/svg" width="34" height="54" viewBox="0 0 24 24">
                        <path
                            className="animate-bounce"
                            fill="#349C8F" d="M19.221 10.803L12 10V4a2 2 0 0 0-4 0v12l-3.031-1.212a2 2 0 0 0-2.64 1.225l-.113.34a1 1 0 0 0 .309 1.084l5.197 4.332c.179.149.406.231.64.231H19a2 2 0 0 0 2-2v-7.21a2 2 0 0 0-1.779-1.987" />
                    </svg>
                </div>
                <svg width="59" height="55" viewBox="0 0 59 55" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path

                        d="M34.8749 7.75H40.6874C41.2013 7.75 41.6941 7.54587 42.0575 7.18252C42.4208 6.81917 42.6249 6.32636 42.6249 5.8125C42.6249 5.29864 42.8291 4.80583 43.1924 4.44248C43.5558 4.07913 44.0486 3.875 44.5624 3.875C45.0763 3.875 45.5691 4.07913 45.9325 4.44248C46.2958 4.80583 46.4999 5.29864 46.4999 5.8125C46.4999 7.35407 45.8876 8.8325 44.7975 9.92256C43.7074 11.0126 42.229 11.625 40.6874 11.625H34.8749C34.3611 11.625 33.8683 11.8291 33.5049 12.1925C33.1416 12.5558 32.9374 13.0486 32.9374 13.5625C32.9374 14.0764 32.7333 14.5692 32.37 14.9325C32.0066 15.2959 31.5138 15.5 30.9999 15.5C30.4861 15.5 29.9933 15.2959 29.6299 14.9325C29.2666 14.5692 29.0624 14.0764 29.0624 13.5625C29.0624 12.0209 29.6748 10.5425 30.7649 9.45244C31.8549 8.36239 33.3334 7.75 34.8749 7.75ZM23.2499 15.5C23.7638 15.5 24.2566 15.2959 24.62 14.9325C24.9833 14.5692 25.1874 14.0764 25.1874 13.5625C25.1874 10.9932 26.2081 8.52916 28.0248 6.7124C29.8416 4.89564 32.3057 3.875 34.8749 3.875H36.8124C37.3263 3.875 37.8191 3.67087 38.1825 3.30752C38.5458 2.94417 38.7499 2.45136 38.7499 1.9375C38.7499 1.42364 38.5458 0.930832 38.1825 0.567481C37.8191 0.204129 37.3263 0 36.8124 0L34.8749 0C31.2791 0.00384648 27.8317 1.43398 25.2891 3.97661C22.7464 6.51924 21.3163 9.96668 21.3124 13.5625C21.3124 14.0764 21.5166 14.5692 21.8799 14.9325C22.2433 15.2959 22.7361 15.5 23.2499 15.5ZM58.1249 52.3125C58.1249 52.8264 57.9208 53.3192 57.5575 53.6825C57.1941 54.0459 56.7013 54.25 56.1874 54.25H1.93744C1.42358 54.25 0.930771 54.0459 0.567419 53.6825C0.204068 53.3192 -6.10352e-05 52.8264 -6.10352e-05 52.3125C-6.10352e-05 51.7986 0.204068 51.3058 0.567419 50.9425C0.930771 50.5791 1.42358 50.375 1.93744 50.375H5.99166C9.32658 43.6349 13.1313 33.7391 13.5285 23.0902C13.5644 22.089 13.9888 21.1411 14.7117 20.4476C15.4347 19.754 16.3993 19.3693 17.4011 19.375H38.7935C39.7917 19.374 40.7518 19.7582 41.4737 20.4476C42.1956 21.137 42.6236 22.0784 42.6685 23.0756C43.1771 34.6619 48.4423 45.4465 51.2153 50.375H56.1874C56.7013 50.375 57.1941 50.5791 57.5575 50.9425C57.9208 51.3058 58.1249 51.7986 58.1249 52.3125ZM38.7935 23.25H34.9185C35.3472 33.8384 39.1302 43.6712 42.4481 50.375H46.8075C43.7584 44.5819 39.2779 34.3034 38.7935 23.25Z"
                        fill={isUsinaActive ? "#F9D8A7" : "#fff"}
                    />
                </svg>

            </Link>

        </nav>
    );
}
